{"version":3,"sources":["scripts/utils.js","classes/BarChart/index.js","classes/Map/Map/Map.js","classes/Map/OpeningHours/OpeningHours.js","classes/Map/index.js","classes/Treemaps/Treemap.js","classes/Treemaps/ReorgTreemap.js","classes/Treemaps/index.js","classes/ClassMap.js","data/data.js","components/CoverLetter/CoverLetter.js","components/SocialMedia/SocialMedia.js","components/FunctionLikeMenu/FunctionLikeMenu.js","components/InfoContainer/InfoContainer.js","components/Collapsible/Collapsible.js","components/InfoElement/InfoElement.js","components/SkInfo/SkInfo.js","components/SquaredButton/SquaredButton.js","components/GraphicsContainer/GraphicsContainer.js","components/FixedGraphicsContent/FixedGraphicsContent.js","components/Portfolio/Portfolio.js","App.js","index.js"],"names":["geojson","json","FETCH","csv","validateFn","fn","fetchData","a","async","url","signal","rowConversion","urlMembers","split","extension","length","message","Object","keys","join","Error","res","type","firstKey","objects","data","feature","getRangeDistribution","bins","count","first","last","copy","nextCopy","map","lower","upper","forEach","d","push","sum","array","reduce","e","areArrayValuesEqual","array1","array2","every","i","getDimensions","element","selection","select","width","parseInt","style","height","setSubcontainers","isStyleResizable","dimensions","append","classed","attr","transitionFactory","name","miliseconds","easing","easeCubicInOut","transition","duration","ease","treemapLayout","treemap","size","paddingInner","paddingOuter","round","Map","settings","container","main","defaultWidth","defaultHeight","projection","undefined","this","applySettings","c","d3","resizeBy","useParent","useP","pathGenerator","fitSize","setResizeMethod","addElements","className","g","update","selectAll","features","id","fid","enter","exit","remove","OpeningHoursMap","containers","additionalData","minGraphHeight","openingColor","colorPalette","colorInterpolator","gamma","xInterpolator","dayNameMap","Mon","order","Tue","Wed","Thu","Fri","Sat","Sun","dayTimeScale","domain","rangeRound","xScale","yScale","appendDayGraphElements","infoDiv","graph","node","on","runTransition","text","class","call","sel","svg","buildDayGraph","svgs","infoDivs","menuContainer","nodes","lineGen","x","y","datum","alias","dayData","filtered","p","properties","open","close","distribution","day","yDomain","flat","range","Math","max","transform","yOffset","index","yValue","selectionWithOpHours","filteredByDay","filter","marker","line","number","parentElement","slice","vWidth","vHeight","tWidth","getBoundingClientRect","tHeight","interpolator","bisector","initDay","delay","styleTween","attrTween","t","parseFloat","right","invert","dd","resetMarker","menu","addData","setAsLower","clone","getFeatureOpeningHours","findFeatures","wOpenHours","dataBins","getDataBins","initStyles","appendAdditionalElements","alwaysOpen","drawMenu","value","f","open_hours","key","getOpenHoursInSeconds","polygons","seconds_per_week","noOpenHours","idsToDiscard","includes","days","entries","sort","heightPct","floor","callback","breaks","final","pop","detail","legend","_","numberSel","selector","indexOf","Treemap","setState","hierarchy","layout","categoricalScale","unknown","renderNewLeaves","self","leaves","relocateLeaves","resizeLeaves","createLabel","resizeLabel","setLeafTitle","updateLeaves","resizeT","relocateT","updateLabel","x0","y0","x1","y1","toFixed","setLabelContent","toLocaleString","init","rollupFn","set","values","nestingOrder","nest","rollup","rootNode","root","nestData","b","createHierarchyAndLayout","createScale","fontSize","label","lWidth","lHeight","hFactor","vFactor","factor","ReorgTreemap","enableDrag","subject","subjectWidth","rest","initL","initR","wTransition","instance","reInsert","refNode","before","insertBefore","nextElementSibling","dt","left","lastRect","isLast","isSameNode","appendChild","n","rect","compare","reset","wrapper","tContainer","ctrl","drawController","months","urls","educationData","term","icon","level","programme","institutionName","city","thesisTopic","experienceData","title","companyName","description","details","skillsLangData","languages","programming","color","sublist","software","portfolioData","path","list","Fragment","target","rel","href","r","fromEntries","m","symbolKey","descProps","backgroundColor","content","src","frameBorder","allow","allowFullScreen","messages","alt","props","children","links","link","toLowerCase","useState","language","state","React","Children","child","to","useLocation","pathname","cloneElement","scrollOnMount","scroll","infoRef","useRef","useEffect","current","window","scrollTo","top","offsetTop","behavior","ref","classes","header","btn","div","headerText","collapsed","onClick","onCollapsedSet","selected","includeThesisTopic","renderJobDetails","bool","isAtLevel","renderGraph","renderSublist","Spinner","containerRef","menuRef","setDescProps","isLoading","failedToLoad","graphic","renderDescription","Description","abortController","AbortController","aborted","console","error","s","onGraphicsMount","abort","mqls","matchMedia","resize","addListener","removeListener","params","classMap","draw","match","pathArray","history","location","renderListElements","renderListElement","getInfoElements","keyProp","AboutMe","exact","toUpperCase","textAlign","App","basename","process","component","Portfolio","from","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6e980369.chunk.js","sourcesContent":["import { select, csv, json } from 'd3';\r\nimport { transition, easeCubicInOut, treemap } from 'd3';\r\nimport { feature } from 'topojson';\r\n\r\nconst geojson = json;\r\nconst FETCH = { csv, json, geojson };\r\n\r\n/* STRING UTILS */\r\n\r\n/* MISC */\r\n\r\nexport const validateFn = (fn) => {\r\n  if(!fn || typeof fn !== 'function') {\r\n    return null;\r\n  }\r\n  return fn;\r\n};\r\n\r\nexport const fetchData = async (url = '',signal,rowConversion) => {\r\n  let data;\r\n  const urlMembers = url.split('.');\r\n  const extension = urlMembers[urlMembers.length - 1];\r\n\r\n  if(!FETCH[extension]) {\r\n    const message = `Invalid Extension. Expected ${Object.keys(FETCH).join(', ')}`;\r\n    return new Error(message);\r\n  }\r\n\r\n  try {\r\n    const res = await FETCH[extension](url,signal,rowConversion);\r\n    if(res.type === 'Topology') {\r\n      const firstKey = Object.keys(res.objects)[0];\r\n      data = feature(res,res.objects[firstKey]);\r\n    } else {\r\n      data = res;\r\n    }\r\n    return data;\r\n  } catch (err) {\r\n    return new Error(err.message);\r\n  }\r\n};\r\n\r\n/* DATA UTILS */\r\n\r\nexport const getRangeDistribution = (data,bins) => { // bins should be already exclusive\r\n  let count, first, last;\r\n  let copy = [...data];\r\n  let nextCopy = [];\r\n  return bins.map(([lower,upper]) => {\r\n    count = 0;\r\n    nextCopy = [];\r\n    copy.forEach((d) => {\r\n      //if(!d) {\r\n      //  return;\r\n      //}\r\n      [first,last] = d;\r\n      if(first < lower) { // left\r\n        if(last >= lower) {\r\n          count += 1;\r\n          nextCopy.push(d);\r\n        }\r\n      } else if(!(first > upper)) { // not right (between)\r\n        count += 1;\r\n        nextCopy.push(d);\r\n      } else {\r\n        nextCopy.push(d);\r\n      }\r\n    });\r\n    copy = [...nextCopy];\r\n    return [lower,upper,count];\r\n  });\r\n};\r\n\r\nexport const sum = (array) => array.reduce((sum,e) => sum += e,0);\r\n\r\nexport const areArrayValuesEqual = (array1,array2) => {\r\n  return array1.every((e,i) => e === array2[i]);\r\n};\r\n\r\n\r\n/* D3 GRAPH UTILS */\r\n\r\nexport const getDimensions = (element) => {\r\n  const selection = select(element);\r\n  return {\r\n    width: parseInt(selection.style('width')),\r\n    height: parseInt(selection.style('height'))\r\n  }\r\n};\r\n\r\nexport const setSubcontainers = (selection,isStyleResizable,dimensions) => {\r\n  if(isStyleResizable) {\r\n    selection.append('div')\r\n      .classed('graphics-svg-container',true)\r\n    .append('svg')\r\n      .attr('class','graphics-svg')\r\n      .attr('preserveAspectRatio', 'xMinYMin meet')\r\n      .attr('viewBox', `0 0 ${dimensions.width} ${dimensions.height}`)\r\n      .classed('svg-content-responsive', true); // Class to make it responsive.\r\n  } else {\r\n     selection.append('svg')\r\n      .attr('class','graphics-svg');\r\n  }\r\n};\r\n\r\nexport const  transitionFactory = (name,miliseconds,easing = easeCubicInOut) => {\r\n  return transition(name)\r\n    .duration(miliseconds)\r\n    .ease(easing);\r\n};\r\n\r\nexport const treemapLayout = (width,height) => { // default settings\r\n  return treemap()\r\n    .size([width,height])\r\n    .paddingInner(1)\r\n    .paddingOuter(2)\r\n    .round(true);\r\n};","export * from './';","import * as d3 from 'd3';\r\nimport { setSubcontainers } from './../../../scripts/utils';\r\nimport './Map.css';\r\n\r\nexport default class Map {\r\n  constructor({ main: container },data,settings) {\r\n    this.container = container;\r\n    this.data = data;\r\n    this.applySettings(data,settings);\r\n    const { container: c, isStyleResizable, dimensions } = this;\r\n    setSubcontainers(d3.select(c),isStyleResizable,dimensions);\r\n  }\r\n\r\n  defaultWidth = '600px';\r\n  defaultHeight = '400px';\r\n  isStyleResizable = true;\r\n  projection = undefined;\r\n\r\n  applySettings(data,settings) {\r\n    const container = d3.select(this.container);\r\n    const { projection, resizeBy, useParent, dimensions } = settings;\r\n    const useP = typeof useParent !== 'boolean' ? true : useParent;\r\n    this.dimensions = {\r\n      width: dimensions.width || (useP ? parseInt(container.style('width')) : this.defaultWidth),\r\n      height: dimensions.height || (useP ? parseInt(container.style('height')) : this.defaultHeight)\r\n    };\r\n    this.projection = d3[projection] ? d3[projection]() : null || d3.geoMercator();\r\n    this.pathGenerator = d3.geoPath()\r\n      .projection(this.projection.fitSize([this.dimensions.width,this.dimensions.height],data));\r\n    \r\n    this.setResizeMethod(resizeBy);\r\n  }\r\n\r\n  draw() {\r\n    d3.select(this.container)\r\n      .select('svg.graphics-svg')\r\n      .append('g')\r\n        .attr('class','g-main');\r\n    \r\n    this.addElements(this.data);\r\n  }\r\n\r\n  setResizeMethod(resizeBy) {\r\n    if(!resizeBy || resizeBy === 'style' || resizeBy !== 'method') {\r\n      this.isStyleResizable = true;\r\n    } else {\r\n      this.isStyleResizable = false;\r\n    }\r\n  }\r\n\r\n  addElements(data,className = 'polygon') {\r\n    const g = d3.select(this.container).select('g.g-main');\r\n    const update = g.selectAll(`path.${className}`)\r\n      .data(data.features,(d,i) => d.id || d.fid || i)\r\n      .attr('class',className)\r\n      .attr('d',this.pathGenerator); \r\n\r\n    update.enter()\r\n      .append('path')\r\n        .attr('class',className)\r\n        .attr('d',this.pathGenerator); \r\n\r\n    update.exit()\r\n      .remove();\r\n  }\r\n};","import * as d3 from 'd3';\r\nimport { fetchData, getRangeDistribution, \r\n  getDimensions, setSubcontainers } from '../../../scripts/utils';\r\nimport Map from '../Map/Map';\r\nimport './OpeningHours.css'\r\n\r\nexport class OpeningHoursMap extends Map {\r\n  constructor(containers,data,settings,additionalData) {\r\n    super(containers,data,settings);\r\n    const callback = () => { // particular to this class\r\n      d3.select(this.container)\r\n        .call(OpeningHoursMap.setAsLower,'path.land')\r\n        .call(OpeningHoursMap.clone,'path.land','land-outline')\r\n        .call(OpeningHoursMap.setAsLower,'path.land-outline');\r\n    };\r\n    this.menuContainer = containers.menu;\r\n    this.addData(additionalData,callback);\r\n  }\r\n\r\n  width = undefined;\r\n  height = undefined;\r\n  minGraphHeight = 100;\r\n  openingColor = d3.color('rgb(249, 249, 134)');\r\n  colorPalette = [this.openingColor, 'orange', 'purple'];\r\n  colorInterpolator = d3.piecewise(d3.interpolateRgb.gamma(1),this.colorPalette);\r\n  xInterpolator = d3.interpolate(0)\r\n  dayNameMap = {\r\n    Mon: { name: 'Monday', order: 1 },\r\n    Tue: { name: 'Tuesday', order: 2 },\r\n    Wed: { name: 'Wednesday', order: 3 },\r\n    Thu: { name: 'Thursday', order: 4 },\r\n    Fri: { name: 'Friday', order: 5 },\r\n    Sat: { name: 'Saturday', order: 6 },\r\n    Sun: { name: 'Sunday', order: 7 }\r\n  };\r\n  dayTimeScale = d3.scaleLinear()\r\n    .domain([0,86400]) // seconds in 24hrs\r\n    .rangeRound([0,10000]) //ms\r\n  xScale = d3.scaleLinear();\r\n  yScale = d3.scaleLinear();\r\n\r\n  draw() { \r\n    super.draw(); // amends/overrides the base class method\r\n    d3.select(this.container).select('svg')\r\n      .classed('scaled',true);\r\n    this.getFeatureOpeningHours();\r\n    const features = this.findFeatures();\r\n    this.selectionWithOpHours = features.wOpenHours;\r\n    this.dataBins = this.getDataBins(this.selectionWithOpHours);\r\n    this.initStyles(features);\r\n    this.appendAdditionalElements(features.alwaysOpen.size());\r\n    this.drawMenu();\r\n  }\r\n\r\n  getFeatureOpeningHours() {\r\n    let value, open, close;\r\n    this.data.features.forEach(f => {\r\n      const { open_hours } = f.properties;\r\n      if(!open_hours) return;\r\n      for (let key in open_hours) {\r\n        [value] = open_hours[key];\r\n        if(value) {\r\n          [open,close] = value;\r\n          f.properties.open_hours[key] = value;\r\n          f.properties[key] = OpeningHoursMap.getOpenHoursInSeconds(open,close);\r\n        } else {\r\n          f.properties.open_hours[key] = null;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  findFeatures() {\r\n    const polygons = d3.select(this.container).select('svg')\r\n      .select('g.g-main')\r\n      .selectAll('path.polygon');\r\n    const alwaysOpen = polygons.filter(d => d.properties.seconds_per_week == 604800),\r\n      noOpenHours = polygons.filter(d => !d.properties.open_hours),\r\n      idsToDiscard = [\r\n        ...alwaysOpen.data().map(f => f.properties.fid),\r\n        ...noOpenHours.data().map(f => f.properties.fid)\r\n      ];\r\n    const wOpenHours = polygons.filter(d => !idsToDiscard.includes(d.properties.fid));\r\n    return { alwaysOpen, noOpenHours, wOpenHours };\r\n  }\r\n\r\n  initStyles({alwaysOpen,noOpenHours,wOpenHours}) {\r\n    alwaysOpen\r\n      .style('fill','#61b864');\r\n    noOpenHours\r\n      .style('fill','#cccccc');\r\n    wOpenHours.filter(d => d.properties['Mon'])\r\n      .style('fill','purple');\r\n  }\r\n\r\n  drawMenu() {\r\n    if(!this.menuContainer) return;\r\n    const { selectionWithOpHours, dayNameMap, dataBins } = this;\r\n    const menu = d3.select(this.menuContainer);\r\n    const { width, height } = getDimensions(this.menuContainer);\r\n    // TODO: handle size problems?\r\n    const days = Object.entries(dayNameMap)\r\n      .sort(([k1,a],[k2,b]) => a - b)\r\n      .map(([k,v]) => ({ alias: k, name: v.name }));\r\n    const heightPct = Math.floor((height / days.length) / height * 100);\r\n    //let height = Math.floor((height / days.length));\r\n    //height = height <\r\n    const graphs = menu.selectAll('.day-graph-container').data(days).enter()\r\n      .append('div')\r\n        .attr('class','day-graph-container')\r\n        .style('height',`${heightPct}%`)\r\n        .call(this.appendDayGraphElements);\r\n    graphs.selectAll('.day-graph')\r\n      .call(this.buildDayGraph,selectionWithOpHours.data(),dataBins,days);\r\n  }\r\n  \r\n  async addData(additionalData,callback = () => {}) {\r\n    if(!additionalData) {\r\n      return;\r\n    }\r\n    let res;\r\n    for (let e of additionalData) {\r\n      res = await fetchData(e.url);\r\n      if(res) {\r\n        this.addElements(res,e.className);\r\n      }\r\n    }\r\n    callback();\r\n    return res;\r\n  }\r\n\r\n  getDataBins() {\r\n    let breaks = [];\r\n    const halfHourSeconds = 30 * 60,\r\n      initial = 0, final = 86400;\r\n    for (let i=initial;i <= (final / halfHourSeconds) - 1;i++) {\r\n      breaks.push((i * halfHourSeconds) - 1);\r\n    }\r\n    breaks[0] = initial;\r\n    breaks[breaks.length - 1] = final;\r\n\r\n    const bins = breaks.map((e,i) => { // intervals' length is breaks.length - 1\r\n      return [e + 1,breaks[i + 1]]; // lower, upper\r\n    });\r\n    bins.pop(); // last bin is not an interval\r\n    bins[0][0] = initial;\r\n    bins[bins.length - 1][1] = final;\r\n    return bins;\r\n  }\r\n\r\n  appendAdditionalElements(alwaysOpen) {\r\n    const detail = d3.select(this.container).append('div') // counter\r\n      .attr('class','transition-detail');\r\n    detail.append('span')\r\n      .attr('class','desc')\r\n      .text('Currently open:');\r\n    detail.append('span')\r\n      .datum(alwaysOpen)\r\n      .attr('class','number')\r\n      .text(d => d);\r\n    \r\n    const legend = d3.select(this.container).append('div') // legend\r\n      .attr('class','op-legend');\r\n    legend.append('img')\r\n      .attr('src','https://noe-lc.github.io/about-me/imgs/op-color-ramp.png')\r\n    legend.selectAll('span').data(['Just Opened','Closed']).enter()\r\n      .append('span')\r\n      .attr('class','ramp-label')\r\n      .style('left',(_,i) => i == 0 ? '0%' : 'initial')\r\n      .style('right',(_,i) => i == 1 ? '0%' : 'initial')\r\n      .text(d => d);\r\n  }\r\n\r\n  appendDayGraphElements = (selection) => {\r\n    const infoDiv = selection.append('div')\r\n      .attr('class','day-info');\r\n    const graph = selection.append('div')\r\n      .attr('class','day-graph');\r\n    const { width, height } = getDimensions(graph.node());\r\n    const info = [{ text: 'Total', class: 'total-lbl' },{ text: 'Max', class: 'max-lbl' }]\r\n\r\n    selection.append('button')\r\n      .attr('class','play')\r\n      .attr('title','Play animation')\r\n      .on('click',this.runTransition);\r\n    \r\n    infoDiv.append('h4')\r\n      .text(d => d.name);\r\n    infoDiv.selectAll('.info-row').data(info).enter()\r\n      .append('div')\r\n      .attr('class','info-row')\r\n      .call((sel) => {\r\n        sel.append('h5')\r\n          .text(d => d.text + ':');\r\n        sel.append('span')\r\n          .attr('class',d => d.class);\r\n      });\r\n    \r\n    const svg = graph\r\n      .call(setSubcontainers,true,{ width, height })\r\n      .select('svg');\r\n    svg.append('g')\r\n      .attr('class','g-main');  \r\n    const gm = svg.append('g')\r\n      .attr('class','g-marker');\r\n    gm.append('line')\r\n      .attr('class','time-marker');    \r\n    this.width = width;\r\n    this.height = height;\r\n  }\r\n\r\n  buildDayGraph = (selection,data,bins) => {\r\n    const { xScale, yScale } = this,\r\n      svgs = selection.selectAll('svg'),\r\n      g = svgs.select('g.g-marker'),\r\n      infoDivs = d3.select(this.menuContainer).selectAll('div.day-info'),\r\n      { width, height } = getDimensions(svgs.nodes()[0]),\r\n      lineGen = d3.line()\r\n        .x(d => xScale(d[0]))\r\n        .y(d => height - yScale(d[2]));\r\n\r\n    svgs.datum(({alias}) => {\r\n      let dayData = data.reduce((filtered,{ properties: p }) => {\r\n        if(p[alias]) filtered.push([p[alias].open,p[alias].close]);\r\n        return filtered;\r\n      },[]);\r\n      return { alias: alias, count: dayData.length, distribution: getRangeDistribution(dayData,bins) };\r\n    });\r\n\r\n    infoDivs.datum((d,i) => ({ day: d, data: svgs.data()[i] }));\r\n    \r\n    const yDomain = svgs.data()\r\n      .map(d => d.distribution).flat()\r\n      .map(d => d[2]);\r\n    xScale\r\n      .domain([bins[0][0],bins[bins.length - 1][1]])\r\n      .range([0,width]);\r\n    yScale\r\n      .domain([0,Math.max(...yDomain)])\r\n      .range([0,height]);\r\n    svgs.select('g').append('path')\r\n      .attr('class','day-path')\r\n      .attr('d',d => lineGen(d.distribution));\r\n    g.select('line.time-marker')\r\n      .attr('x1',0).attr('y1',height)\r\n      .attr('x2',0).attr('y2',height);\r\n\r\n    infoDivs.select('span.total-lbl')\r\n      .text(d => d.data.count);\r\n    infoDivs.select('span.max-lbl')\r\n      .text(d => Math.max(...d.data.distribution.map(d => d[2])));\r\n     \r\n  }\r\n\r\n  runTransition = ({ alias }) => {\r\n    let transform, x, yOffset,  index, yValue;\r\n    const { colorPalette, dayTimeScale, selectionWithOpHours, \r\n      colorInterpolator, container, menuContainer, xScale, yScale } = this;\r\n\r\n    selectionWithOpHours.transition();\r\n    // TODO: style those without opening hours for given day\r\n    const filteredByDay = selectionWithOpHours.filter(d => d.properties[alias]);\r\n    const svgs = d3.select(menuContainer).selectAll('svg.graphics-svg');\r\n    const svg = svgs.filter(d => d.alias == alias);\r\n    const marker = svg.select('g.g-marker'),\r\n      line = marker.select('line'),\r\n      number = d3.select(container.parentElement).select('span.number'),\r\n      [vWidth,vHeight] = svg.attr('viewBox').split(' ').slice(2),  // viewbox\r\n      { width: sWidth } = svg.node().getBoundingClientRect(),\r\n      { width } = svg.select('path.day-path').node().getBoundingClientRect(),\r\n      tWidth = (vWidth / sWidth) * width, // calculate final width in terms of \"viewport units\"\r\n      tHeight = vHeight, // vertical viewport units are maintained\r\n      interpolator = d3.interpolateTransformSvg('translate(0,0)',`translate(${tWidth},0)`),\r\n      bisector = d3.bisector(d => d[0]);\r\n    \r\n    yScale.range([0,tHeight]); // adjust the scales to the current dimensions\r\n    xScale.range([0,tWidth]);\r\n    \r\n    this.initDay(filteredByDay,alias,number); // assign init styles according to day\r\n    filteredByDay.filter(d => d.properties[alias].open != '0')\r\n      .style('fill',colorPalette[colorPalette.length - 1]);\r\n\r\n    filteredByDay.transition('day')\r\n      .style('stroke','black')\r\n      .delay(d => dayTimeScale(d.properties[alias].open))\r\n      .duration((d,i) => dayTimeScale(d.properties[alias].close - d.properties[alias].open))\r\n      .styleTween('fill',() => colorInterpolator)\r\n      .style('stroke','white');\r\n\r\n    marker.transition('marker')\r\n      .duration(10000)\r\n      .attrTween('transform',({ distribution }) => (t) => {\r\n        transform = interpolator(t); \r\n        x = parseFloat(transform.slice(10));\r\n        index = bisector.right(distribution,xScale.invert(x)) - 1;\r\n        yValue = distribution[index][2];\r\n        yOffset = tHeight - yScale(yValue);\r\n        line.attr('y1',yOffset);\r\n        number.text(d => d + yValue);\r\n        return transform;\r\n      }).on('start',d => { // cancel ongoing transitions in other markers\r\n        line.style('display','block');\r\n        const markers = svgs.selectAll('g.g-marker').filter(dd => dd !== d);\r\n        markers.transition('marker');\r\n      }).on('end',() => {\r\n        this.initDay(filteredByDay,alias,number);\r\n        marker.call(OpeningHoursMap.resetMarker);\r\n      }).on('interrupt',() => marker.call(OpeningHoursMap.resetMarker));\r\n  }\r\n\r\n  initDay(selection,alias,numberSel) {\r\n    const open = selection.filter(d => d.properties[alias].open == '0') \r\n      .style('fill',this.openingColor);\r\n    numberSel.text(d => d + open.size());\r\n  }\r\n\r\n  static getOpenHoursInSeconds = (open,close) => {\r\n    [close,open] = [close,open].map(t => {\r\n      let index = t.indexOf(':'),\r\n        hours = +t.slice(0,index),\r\n        mins = +t.slice(index + 1);\r\n      return (hours * 60 * 60) + (mins * 60);\r\n    });\r\n    return { open, close };\r\n  };\r\n\r\n  static clone(selection,selector,className) {\r\n    return selection.select(selector).clone()\r\n      .attr('class',className);  \r\n  }\r\n\r\n  static setAsLower(selection,selector) {\r\n    return selection\r\n      .select('g.g-main')\r\n      .select(selector).lower();\r\n  }\r\n\r\n  static resetMarker(selection){\r\n    selection\r\n      .attr('transform','translate(0,0)')\r\n      .select('line')\r\n        .attr('y1',0)\r\n        .style('display','none');\r\n  }\r\n};\r\n\r\n/** loops through the dates\r\n  function runTransition() {\r\n    circles.transition()\r\n      .on('start',function repeat(d) {\r\n        d.index = !isNaN(d.index) ? d.index += 1 : 0;\r\n        let prop = props[d.index];\r\n      \r\n        if(d.index > props.length - 1) {\r\n          d.index = 0;\r\n          return;\r\n        }\r\n      \r\n        d3.active(this).transition()\r\n          .delay(d => scale(d[prop].start))\r\n          .duration(d => scale(d[prop].end) - scale(d[prop].start))\r\n          .styleTween('fill',() => colorInterpolator)\r\n        .transition()\r\n          .delay(d => totalTime - scale(d[prop].end ))\r\n          .on('start',repeat);\r\n      });\r\n      \r\n  };\r\n */","export * from './Map/Map';\r\nexport * from './OpeningHours/OpeningHours';","import * as d3 from 'd3';\r\nimport { transitionFactory, getDimensions, treemapLayout } from '../../scripts/utils';\r\nimport './Treemap.css';\r\n\r\nexport class Treemap {\r\n  constructor({ main: container },data,settings,additionalData,setState) {\r\n    this.container = container;\r\n    this.data = data;\r\n    this.setState = setState || (() => { }) // \r\n    this.init(settings);\r\n  }\r\n\r\n  defaultWidth = '600px';\r\n  defaultHeight = '400px';\r\n  dimensions = {};\r\n  hierarchy = null;\r\n  layout = null;\r\n  categoricalScale = d3.scaleOrdinal().unknown('gray');\r\n\r\n  init(settings) {\r\n    const { rollupFn } = settings;\r\n    this.rollupFn = rollupFn;\r\n    this.applySettings(settings);\r\n    this.setSubcontainers();\r\n  }\r\n\r\n  createScale(hierarchy) {\r\n    const set = d3.set(hierarchy.leaves(),d => d.data.key);\r\n    return this.categoricalScale\r\n      .domain(set.values())\r\n      .range(d3.schemeCategory10);\r\n  }\r\n\r\n  nestData(data) {\r\n    return this.nestingOrder\r\n      .reduce((nest,e) => nest.key(d => d[e]),d3.nest())\r\n      .rollup(this.rollupFn)\r\n      .entries(data);\r\n  }\r\n\r\n  applySettings(settings) {\r\n    const container = d3.select(this.container);\r\n    const { useParent, dimensions, nestingOrder } = settings;\r\n    const useP = typeof useParent !== 'boolean' ? true : useParent;\r\n    this.dimensions = {\r\n      width: dimensions.width || (useP ? parseInt(container.style('width')) : this.defaultWidth),\r\n      height: dimensions.height || (useP ? parseInt(container.style('height')) : this.defaultHeight)\r\n    };\r\n    this.nestingOrder = nestingOrder || [];\r\n  }\r\n\r\n  createHierarchyAndLayout(data) {\r\n    const { width, height } = this.dimensions;\r\n    const nest = this.nestData(data);\r\n    const rootNode = { root: 'root', values: nest };\r\n    const hierarchy = d3.hierarchy(rootNode,d => d.values)\r\n      .sum(d => d.value)\r\n      .sort((a, b) => b.value - a.value);\r\n    const layout = treemapLayout(width,height)(hierarchy);\r\n    return { hierarchy, layout };\r\n  }\r\n\r\n  setSubcontainers() {\r\n    d3.select(this.container).append('div')\r\n      .attr('class','treemap-wrapper')\r\n    .append('div')\r\n      .attr('class','treemap-container');\r\n  }\r\n\r\n  draw() {\r\n    this.update();\r\n  }\r\n\r\n  resize(container = this.container) {\r\n    const { width, height } = getDimensions(container);\r\n    const layout =  treemapLayout(width,height)(this.hierarchy);\r\n    d3.select(this.container)\r\n      .selectAll('.leaf').data(layout.leaves())\r\n      .call(this.updateLeaves);\r\n    this.dimensions = { width, height };\r\n    return layout;\r\n  }\r\n\r\n  update(data,nestingOrder) {\r\n    this.data = data || this.data;\r\n    this.nestingOrder = nestingOrder || this.nestingOrder;\r\n    const { hierarchy, layout } = this.createHierarchyAndLayout(this.data);\r\n    this.hierarchy = hierarchy;\r\n    this.layout = layout;\r\n    this.categoricalScale = this.createScale(hierarchy);\r\n    \r\n    const update = d3.select(this.container).select('.treemap-container')\r\n      .selectAll('.leaf').data(layout.leaves())\r\n      .call(this.updateLeaves);\r\n    update.enter()\r\n      .call(this.renderNewLeaves);\r\n    update.exit()\r\n      .remove();\r\n\r\n    this.setState(this.categoricalScale.domain().map(e => [e,this.categoricalScale(e)]));\r\n  }\r\n\r\n  renderNewLeaves = (selection) => {\r\n    const self = this;\r\n    const t = transitionFactory('newLeaf', 1000);\r\n    const leaves = selection.append('div')\r\n      .attr('class', 'leaf')\r\n      .style('background-color',d => this.categoricalScale(d.data.key));\r\n    leaves.transition(t)\r\n      .call(this.relocateLeaves)\r\n      .call(this.resizeLeaves)\r\n      .call(this.createLabel)\r\n      .on('end',function() { // resize label on transition end\r\n        self.resizeLabel.call(this);\r\n      });\r\n    leaves.attr('title',this.setLeafTitle);\r\n    //newLeafTransition // interrupt i\r\n    //  .on('start', this.interruptIfDataIsNull(leaves, 'newLeaf'));\r\n  }\r\n\r\n  updateLeaves = (selection) => {\r\n    const self = this;\r\n    const resizeT = transitionFactory('updateLeaf', 500);\r\n    const relocateT = transitionFactory('relocate',500);\r\n    selection\r\n      .attr('title', this.setLeafTitle)\r\n      .style('background-color',d => this.categoricalScale(d.data.key))\r\n    .transition(resizeT)\r\n      .call(this.resizeLeaves)\r\n    .transition(relocateT)\r\n      .call(this.relocateLeaves)\r\n      .call(this.updateLabel)\r\n      .on('end',function() {\r\n        self.resizeLabel.call(this);\r\n      });\r\n  }\r\n\r\n  relocateLeaves = (sel) => {\r\n    sel.style('left', d => d.x0 + 'px')\r\n      .style('top', d => d.y0 + 'px');\r\n  }\r\n\r\n  resizeLeaves = (sel) => {\r\n    sel.style('width', d => d.x1 - d.x0 + 'px')\r\n      .style('height', d => d.y1 - d.y0 + 'px');\r\n  }\r\n\r\n  setLeafTitle = ({ data, value }) => {\r\n    return `${value}, (${(value / this.layout.value * 100).toFixed(1)}%) - ${data.key}`;\r\n  }\r\n\r\n  createLabel = (transition) => {\r\n    transition.selection().append('div')\r\n      .attr('class', 'leaf-label')\r\n      .call(this.setLabelContent);\r\n  }\r\n\r\n  setLabelContent = (sel) => {\r\n    sel.append('h1')\r\n      .attr('class','leaf-total')\r\n      .text(d => d.value.toLocaleString());\r\n    sel.append('span')\r\n      .attr('class','leaf-pct')\r\n      .text(d => `${(d.value / this.layout.value * 100).toFixed(1)}%`);\r\n    sel.append('span')\r\n      .attr('class','leaf-name')\r\n      .text(d => d.data.key);\r\n  }\r\n\r\n  updateLabel = (sel) => {\r\n    sel.select('.leaf-total')\r\n      .text(d => d.value.toLocaleString());\r\n    sel.select('.leaf-pct')\r\n      .text(d => `${(d.value / this.layout.value * 100).toFixed(1)}%`);\r\n    sel.select('.leaf-name')\r\n      .text(d => d.data.key);\r\n  }\r\n\r\n  resizeLabel() { // meant to be called with a different 'this' value\r\n    let fontSize = 16;\r\n    const label = d3.select(this).select('.leaf-label'),\r\n      { width: lWidth, height: lHeight } = getDimensions(this),\r\n      { width, height } = getDimensions(label.node()),\r\n      hFactor = lWidth / width,\r\n      vFactor = lHeight / height,\r\n      factor = hFactor * vFactor;\r\n\r\n    if(hFactor < 1 && vFactor >= 1) {\r\n      fontSize = fontSize * hFactor;\r\n    } else if(hFactor >= 1 && vFactor < 1) {\r\n      fontSize = fontSize * vFactor;\r\n    } else if(factor >= 1) {\r\n      fontSize = fontSize * factor;\r\n      fontSize = fontSize > 16 ? 16 : fontSize;\r\n    } \r\n\r\n    if(fontSize <= 16) label.style('font-size',fontSize + 'px');\r\n\r\n  }\r\n\r\n}","import * as d3 from 'd3';\r\nimport { Treemap } from './Treemap';\r\nimport { getDimensions, areArrayValuesEqual } from '../../scripts/utils';\r\n\r\nexport class ReorgTreemap extends Treemap {\r\n  draw() {\r\n    const wrapper = d3.select(this.container).select('.treemap-wrapper');\r\n    const tContainer =  wrapper.select('.treemap-container');\r\n    const ctrl = wrapper.append('div')\r\n      .attr('class','treemap-ctrl')\r\n      .lower();\r\n    this.dimensions = getDimensions(tContainer.node()); // recalculate dims after appending controller\r\n    this.drawController(ctrl);\r\n    super.draw();\r\n  }\r\n\r\n  drawController(ctrl) { // enables drag\r\n    ctrl.selectAll('.nest-option').data(this.nestingOrder).enter()\r\n      .append('div')\r\n        .attr('class','nest-option')\r\n        .text(d => d)\r\n        .call(this.enableDrag);\r\n  }\r\n\r\n  resize() {\r\n    super.resize(d3.select(this.container).select('.treemap-container').node());\r\n  }\r\n\r\n  enableDrag = (sel) => {\r\n    let subject, subjectWidth, clone, rest, initL, initR, wTransition = false;\r\n    const instance = this;\r\n\r\n    const reset = (subject,wTransition) => { \r\n      subject.attr('style',null)\r\n        .style('position','relative');\r\n      if(wTransition) {\r\n        clone.transition()\r\n          .duration(750)\r\n          .style('padding',0)\r\n          .style('width','0px')\r\n          .remove();\r\n        return;\r\n      }\r\n      clone.remove();\r\n    };\r\n    const reInsert = (refNode,node,before = true) => {\r\n      refNode.parentElement.insertBefore(refNode,before ? node : node.nextElementSibling);\r\n    };\r\n\r\n    sel.call(\r\n      d3.drag()\r\n        .subject(d => sel.filter(dt => dt === d))\r\n        .on('start',function(d) {\r\n          subject = d3.event.subject;\r\n          subjectWidth = parseInt(subject.style('width')) / 2;\r\n          rest = sel.filter(dt => dt !== d);\r\n          ({ left: initL, right: initR } = this.getBoundingClientRect());\r\n          initL += 10; // tolerance \r\n          initR += 10;\r\n          clone = subject.clone(true)\r\n            .classed('clone',true)\r\n            .datum(null);\r\n         })\r\n        .on('drag',function() { // TODO: set a \"snapped\" status to animate elements?\r\n          subject\r\n            .style('position','absolute')\r\n            .style('left',d3.event.x - subjectWidth + 'px');\r\n        })\r\n        .on('end',function() {\r\n          const nodes = rest.nodes(),\r\n            lastRect = nodes[nodes.length - 1].getBoundingClientRect(),\r\n            isLast = this.isSameNode(nodes[nodes.length -1]),\r\n            { left, right } = this.getBoundingClientRect();\r\n\r\n          const compare = () => {\r\n            if(!isLast && left > lastRect.right) { // moved to last position\r\n              this.parentElement.appendChild(this);\r\n              wTransition = true;\r\n            } else if(!(isLast && left > lastRect.left)) { // in between and all other previous\r\n              for(let n of nodes) {\r\n                let rect = n.getBoundingClientRect();\r\n                if(left < rect.left) {\r\n                  reInsert(this,n);\r\n                  wTransition = true;\r\n                  break;\r\n                } else if(left > rect.right) {\r\n                  reInsert(this,n,false);\r\n                  wTransition = true;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          };\r\n          \r\n          if(left > initR || right < initL) { // moved beyond previous\r\n            compare();\r\n          }\r\n\r\n          reset(subject,wTransition);\r\n          sel = d3.select(this.parentElement).selectAll('.nest-option') // reassign selection after reordering\r\n            .filter(d => d);\r\n          wTransition = false;\r\n\r\n          if(!areArrayValuesEqual(sel.data(),instance.nestingOrder)) {\r\n            instance.update(null,sel.data());\r\n          }\r\n        })\r\n    )\r\n  }\r\n}","export * from './Treemap';\r\nexport * from './ReorgTreemap';","export * from './BarChart';\r\nexport * from './LineChart';\r\nexport * from './Map';\r\nexport * from './Overlays';\r\nexport * from './SegmentedBar';\r\nexport * from './Treemaps';\r\n","import React from 'react';\r\nimport { sum } from '../scripts/utils';\r\n\r\nconst months = [1,2,3,4,5,6,7,8,9,10,11,12];\r\nconst monthRowConversion = r => ({ \r\n  ...r, \r\n  ...Object.fromEntries(months.map(m => [m,+r[m]]))\r\n});\r\n\r\nexport const urls = [\r\n  { name: 'LinkedIn', url: 'https://www.linkedin.com/in/noe-landaverde-28245aa2/' },\r\n  { name: 'Resume', url:'https://github.com/noe-lc/about-me/raw/gh-pages/files/Resume.pdf' }\r\n];\r\n\r\nexport const educationData = [\r\n  { \r\n    term: ['2009-01-01','2014-01-01'],\r\n    icon: 'uaslp',\r\n    level: \"Bachelor's Degree\",\r\n    programme: 'BE Geomatics Engineering',\r\n    institutionName: 'Autonomous University of San Luis Potosi',\r\n    city: 'San Luis Potosí, SLP, Mexico',\r\n    thesisTopic: 'Web Application for Public Transportation Inquiring'\r\n  },\r\n  { \r\n    term: ['2009-01-01','2014-01-01'],\r\n    icon: 'itc',\r\n    level: \"Master of Science\",\r\n    programme: 'MSc Geoinformation Science and Earth Observation',\r\n    institutionName: 'Faculty of Geoinformation Science and Earth Observation (ITC), University of Twente',\r\n    city: 'Enschede, The Netherlands',\r\n    thesisTopic: 'A Conceptual Framework for Interactive Cartographic Storytelling'\r\n  },\r\n];\r\n\r\nexport const experienceData = [\r\n  { \r\n    term: ['2019-01-07','2020-01-07'],\r\n    title: 'Geoinformatics Developer',\r\n    icon: 'datalabmx',\r\n    companyName: 'DataLab MX',\r\n    city: 'Mexico City, Mexico',\r\n    description: 'Developer of web applications for interactive data and cartographic visualization', \r\n    details: [\r\n      `Platforms for visualizing service issues and user reports for major transportation service providers`,\r\n      `Interactive web maps which located and provided details about public reports on issues \r\n       related to safety, utilities, and other services provided by the government`,\r\n      `Use of HERE and ArcGIS APIs for geocoding and reverse geocoding large datasets. Obtained results\r\n      were matched and paired up to official datasets via a Natural Language Processing method`,\r\n      `Automation and preprocessing of GIS data prior to its insertion into database tables`\r\n    ]\r\n  },\r\n  { \r\n    term: ['2018-06-04','2020-11-16'],\r\n    title: 'Intern', \r\n    companyName: 'Environmental Systems Research Institute (ESRI)', \r\n    icon: 'esri',\r\n    city: 'Redlands, California',\r\n    description: 'Supported the now GIS Industry Solutions division on tasks related to Marketing and Statistics',\r\n    details: [\r\n      `Creation and testing of GIS workflows, in order to migrate them into the latest software\r\n      version available (ArcMap/ArcGIS Pro and Drone2Map)`,\r\n      `Searching and updating content used in internal and external publications through web scraping`,\r\n      `Updating & analyzing a database of global indicators to create thematic cartography for marketing planning purposes`\r\n    ]\r\n  },\r\n  { \r\n    term: ['2015-09-02','2016-09-05'],\r\n    title: 'Part-time Teacher', \r\n    companyName: 'Autonomous University of San Luis Potosi (UASLP)',\r\n    icon: 'uaslp',\r\n    city: 'San Luis Potosi, SLP, MX', \r\n    description: `Part-time teacher & member of the Geoinformatics Academic Board. During that\r\n      year I taught four subjects and gave courses and seminars on new trends and technologies\r\n      related to the programme/profession`,\r\n    details: [\r\n      'Introduction to Geoinformatics','Fundamentals of Geographic Information Systems',\r\n      'Fundamentals of Remote Sensing','Applications of Geographic Information Systems'\r\n    ]\r\n  },\r\n  { \r\n    term: ['2014-05-02','2014-08-02'],\r\n    title: 'Cartography Technician',\r\n    icon: 'implan',\r\n    companyName: 'Municipal Institute of Planning (IMPLAN)', \r\n    city: 'San Luis Potosi, SLP, MX',\r\n    description: `Three-month project, during which our team was able to update and rectify cadastral\r\n    and thematic cartography & databases of the metropolitan area of the San Luis Potosí city`,\r\n    details: []\r\n  },\r\n];\r\n\r\nexport const skillsLangData = {\r\n  languages: [\r\n    { name: 'Spanish (Native speaker)', level: '' },\r\n    { name: 'English', level: 6 },\r\n  ],\r\n  programming: [\r\n    { name: 'HTML', level: 5, color: '#00aeef' },\r\n    { name: 'CSS', level: 5, color: '#fa568f' },\r\n    { name: 'JavaScript', level: 5, color: '#e6c301',  sublist: ['React','Redux','D3','Google Maps API','Turf','ArcGIS API'] },\r\n    { name: 'Python', level: 5, color: '#606060', sublist: ['GDAL','Pandas','Numpy','Scikit Learn','ArcPy'] },\r\n    { name: 'SQL', level: 4, sublist: ['MySQL','PostgreSQL'] },\r\n    { name:'Git', level: 3 }\r\n  ],\r\n  software: [\r\n    { name: 'Microsoft Office', sublist: ['Excel','Word','PowerPoint','Visio','Access'] },\r\n    { name: 'ArcGIS', sublist: ['ArcMap','ArcGIS Pro','ArcGIS Online','Portal','Insights','Story Maps'] },\r\n    { name: 'QGIS', sublist: [] },\r\n    { name: 'Tableau', sublist: [] },\r\n    { name: 'AutoCAD', sublist: [] },\r\n  ]\r\n};\r\n\r\nexport const portfolioData = [ // these paths are preceded by portfolio/\r\n  { \r\n    name: 'Maps', \r\n    path: 'maps', \r\n    list: [\r\n      {\r\n        type: 'graphics',\r\n        name:'Opening Hours',\r\n        class: 'OpeningHoursMap',\r\n        path:'opening-hours',\r\n        url:'https://raw.githubusercontent.com/noe-lc/noe-lc.github.io/master/data/manhattan_reduced_tjson.json',\r\n        settings: {\r\n          resizeBy: 'style', // style || method \r\n          dimensions: { height: undefined, width: undefined },\r\n        },\r\n        additionalData: [\r\n          { \r\n            url: 'https://raw.githubusercontent.com/noe-lc/noe-lc.github.io/master/data/manhattan_polygon.geojson',\r\n            className: 'land'\r\n          }\r\n        ],\r\n        description: () => {\r\n          return (\r\n            <React.Fragment>\r\n              <p className='content-margin'>\r\n              This is a map I originally had built for a map contest organized by \r\n              <a target='_blank' rel='noopener noreferrer' href='https://mapscaping.com/'> MapScaping </a> last December. It shows polygons of each physical retail location in the lower Manhattan\r\n              area of New York City, and transitions through a normal 24hr-day in a span on 10 seconds. \r\n              Each polygon takes on the opening hours of the location which:\r\n              </p>\r\n              <ul>\r\n                <li>Is within the polygon's bounds, and</li>\r\n                <li>Is open the most time per week compared to others sharing the same polygon</li>\r\n              </ul>\r\n              <p className='content-margin'>\r\n                The delay and duration of transitions for each polygon depend on their opening and closing hours.\r\n                Furthermore, the line charts describe the number of locations open at any given time, with a total\r\n                and a maximum of open locations per day.\r\n              </p>\r\n              <dl className='data-source'>\r\n                <dt>Data source: </dt>\r\n                <dd>Geometry & Patterns by <a target='_blank' rel='noopener noreferrer' href='https://safegraph.com/'>Safegraph</a></dd>\r\n              </dl>\r\n            </React.Fragment>\r\n          )\r\n        }\r\n      },\r\n    ] \r\n  },\r\n  { \r\n    name: 'Graphs & Charts',\r\n    path:'graphs-and-charts', \r\n    list: [\r\n      {\r\n        type: 'graphics',\r\n        name:'Reorganizable Treemap ',\r\n        path:'reorganizable-treemap',\r\n        url:'https://raw.githubusercontent.com/noe-lc/about-me/master/src/data/product_data.csv',\r\n        rowConversion: monthRowConversion,\r\n        class: 'ReorgTreemap',\r\n        settings: {\r\n          resizeBy: 'method',\r\n          dimensions: { height: undefined, width: undefined },\r\n          nestingOrder: ['YEAR','DESCRIPTION','WEIGHT'],\r\n          symbolKey: null,\r\n          rollupFn: g => sum( g.map(e => sum(months.map(m => e[m]) )))\r\n        },\r\n        additionalData: [],\r\n        description: ({ descProps }) => { // expects a 2D array to render a legend\r\n          const renderLegend = () => {\r\n            return descProps ? (\r\n              <dl className='desc-legend'>\r\n                <dt>Key:</dt>\r\n                <div className='desc-legend-cont'>\r\n                  {descProps.map(([name,backgroundColor]) => \r\n                    <dd key={name}>\r\n                      <span className='desc-legend-patch' style={{ backgroundColor }}></span>\r\n                      <span className='desc-legend-label'>{name}</span>\r\n                    </dd>\r\n                  )}\r\n                </div>               \r\n              </dl>\r\n            ): null;   \r\n          };\r\n          return (\r\n            <React.Fragment>\r\n              {renderLegend()}\r\n              <p className='content-margin'>\r\n                At one of my previous jobs we constantly used treemaps for displaying hierarchical data, and\r\n                I always wanted to build one on which the user could control the order in which the data were nested. <br/>\r\n              </p>\r\n              <p className='content-margin'>\r\n                On this example, <b>you can drag and drop the property name containers above the treemap to change the nesting order. </b> \r\n                After each update, the key will be modified to reflect the new unique values in the tree's leaves.\r\n              </p>           \r\n            </React.Fragment>\r\n          )\r\n        }\r\n      },\r\n    ] \r\n  },\r\n  { \r\n    name: 'Web Apps', \r\n    path:'web-apps', \r\n    list: [\r\n      {\r\n        type: 'fixed',\r\n        name:'Public Reports',\r\n        content: () => {\r\n          return <iframe title='Public Reports App Sample' className='app-video' src=\"https://player.vimeo.com/video/392540452\" frameBorder=\"0\" allow=\"autoplay; fullscreen\" allowFullScreen></iframe>\r\n\r\n        },\r\n        description: () => {\r\n          return (\r\n            <div className='flex-divider'>\r\n              <div className='flex-3'>\r\n                <h3>Description</h3>\r\n                <p className='content-margin'>\r\n                  Based on data mined from social media, geographical references were used to digitize features on a map\r\n                  and link them to public posts. Such features were uploaded to a database using internal tools and then consumed\r\n                  by the app in order to find clusters and frequencies of issues related to government services.\r\n                </p>\r\n                <p className='content-margin'>\r\n                  The app provided ways of filtering spatially, by date, or category.\r\n                </p>\r\n              </div>\r\n              <div className='flex-3'>\r\n                <h3>Challenges</h3>\r\n                <ol className='app-video-listing'>\r\n                  <li>Managing layer visibility at different zoom levels <sup>*</sup></li>\r\n                  <li>Spatial filtering at street and block level on drag events <sup>*</sup></li>\r\n                  <li>Leveraging the marker clustering library to add color codes, and cluster features not only by proximity, but by attributes as well.</li>\r\n                  <li>Creating custom overlays and make them act as proportional symbols</li>\r\n                </ol>\r\n                <div className='note'>\r\n                  <mark><sup>*</sup> Required behaviour to improve performance</mark>\r\n                </div> \r\n              </div>\r\n              <div>\r\n                <h3>Tools/Technologies</h3>\r\n                <ol className='app-video-listing'>\r\n                  <li>React</li>\r\n                  <li>Redux</li>\r\n                  <li>Google Maps API</li>\r\n                  <li>D3.js</li>\r\n                  <li>\r\n                    <a target='_blank' rel='noopener noreferrer' href='https://github.com/gmaps-marker-clusterer/gmaps-marker-clusterer'>Google Maps Marker Clustering</a>\r\n                  </li>\r\n                  <li>Turf.js</li>\r\n                </ol>\r\n              </div>\r\n            </div>\r\n          )\r\n        }\r\n      },\r\n      {\r\n        type: 'fixed',\r\n        name:'Subway Reports',\r\n        content: () => {\r\n          return <iframe title='Subway Reports App Sample' className='app-video' src=\"https://player.vimeo.com/video/392540761\" frameBorder=\"0\" allow=\"autoplay; fullscreen\" allowFullScreen></iframe>\r\n        },\r\n        description: () => {\r\n          return (\r\n            <div className='flex-divider'>\r\n              <div className='flex-3'>\r\n                <h3>Description</h3>\r\n                <p className='content-margin'>\r\n                  As a way of keeping track and following service issues (reported on Social Media by users), our organization\r\n                  devised a framework for classifying and organizing them so that the data could be visualized in different ways, namely:\r\n                  Summary Tables, Rankings, Bar Charts (constructed on nominal and time dimensions), a Treemap, and a Map.\r\n                </p>\r\n                <p className='content-margin'>\r\n                  In addition, custom and highly interactive filters were built for the data itself was content-rich and\r\n                  required detailed exploration. To further support this, components were contained to maintain consistent updates\r\n                  such as those found in dashboards.\r\n                </p>\r\n              </div>\r\n              <div className='flex-3'>\r\n                <h3>Challenges</h3>\r\n                <ol className='app-video-listing'>\r\n                  <li>Finding a data structure that could be reused by as many components as possible</li>\r\n                  <li>Using these data structures to reflect updates and data availability on the filters (e.g. graying out or disabling controls)</li>                \r\n                  <li>Generating filter options dynamically</li>\r\n                  <li>Error handling for DOM transitions which could be interrupted by fast user interaction</li>                 \r\n                </ol>\r\n              </div>\r\n              <div>\r\n                <h3>Tools/Technologies</h3>\r\n                <ol className='app-video-listing'>\r\n                  <li>React</li>\r\n                  <li>Redux</li>\r\n                  <li>Google Maps API</li>\r\n                  <li>D3.js</li>\r\n                </ol>\r\n              </div>\r\n            </div>\r\n          )\r\n        }\r\n      },\r\n      {\r\n        type: 'fixed',\r\n        name: 'Incidences',\r\n        content: () => {\r\n          return (\r\n            <React.Fragment>\r\n              <iframe title='Incidences summary App sample' className='app-video'  src=\"https://player.vimeo.com/video/393004335\"  frameBorder=\"0\" allow=\"autoplay; fullscreen\" allowFullScreen></iframe>\r\n              <iframe title='Geolocated Incidences App sample' className='app-video'  src=\"https://player.vimeo.com/video/392995897\"  frameBorder=\"0\" allow=\"autoplay; fullscreen\" allowFullScreen></iframe>\r\n            </React.Fragment>    \r\n          )\r\n        },\r\n        description: () => {\r\n          return (\r\n            <div className='flex-divider'>\r\n              <div className='flex-3'>\r\n                <h3>Description</h3>\r\n                <p className='content-margin'>\r\n                  We created a couple of applications for geolocating and \"tracking\" incidences in Mexico City. It was decided\r\n                  that we would have the qualitative and spatial concerns separate, these are contained respectively in the videos above.\r\n                </p>\r\n                <p>\r\n                  The first application consists of a summary table, a treemap and a segmented bar chart. The user can click the elements to\r\n                  filter and explore the entries belonging to it. More details of the data are provided in a modal and other sections where each\r\n                  event is presented separately, and clicking on a link will take the user to the second app via <code><a target='_blank' rel='noopener noreferrer' href='https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage'>postMessage</a></code>. \r\n                  This window method allowed us to send the current state of the filters as well as the selected incidence, in order to apply these changes on component mounting.\r\n                </p>\r\n                <p>\r\n                  Each incidence was linked to official data sources, media content, and more importantly, related \r\n                  events that followed the first one registered. We included polygon data layers and a heatmap to help\r\n                  authorities find hotspots and identify sectors which required attention.\r\n                </p>\r\n              </div>\r\n              <div className='flex-3'>\r\n                <h3>Challenges</h3>\r\n                <ol className='app-video-listing'>\r\n                  <li>Fine-tuning the order of execution to accomodate the changes sent from the other application, regardless the window was open or not</li>\r\n                  <li>Sharing state and component methods with the map, sidebar, and filters</li>\r\n                  <li>Finding features with the same coordinates and symbolizing them differently including the number of features</li>\r\n                  <li>Linking features by their attributes, and changing their style</li>\r\n                  <li>Creating a data layer style that highlighted the current feature for a short period of time</li>               \r\n                </ol>\r\n              </div>\r\n              <div>\r\n                <h3>Tools/Technologies</h3>\r\n                <ol className='app-video-listing'>\r\n                  <li>React</li>\r\n                  <li>Redux</li>\r\n                  <li>Google Maps API</li>\r\n                  <li>D3.js</li>\r\n                  <li>Turf.js</li>\r\n                </ol>\r\n              </div>\r\n            </div>\r\n          )\r\n        }\r\n      }\r\n    ],\r\n    messages: [\r\n      {\r\n        type: 'warning',\r\n        text: `Unfortunately I cannot provide a very detailed description, nor the links to the web applications\r\n        showcased below. A lot of text and media content are either blurred out, pixelated, or even censored. This\r\n        is due to the data behind them which was deemed to be sensitive to external users. However, they do a good job in\r\n        showing their overall functionality, design, and interactive capabilities; more information regarding\r\n        the tools used and the challenges faced while building them is in the description below the videos.`\r\n      }\r\n    ] \r\n  }\r\n];\r\n\r\n// subway\r\n// Georef\r\n//<iframe  width=\"640\" height=\"360\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen></iframe>\r\n","import React from 'react';\r\nimport './CoverLetter.css';\r\n\r\nexport default () => {\r\n  return (\r\n    <div className='cover-letter'>\r\n      <div className='img-container'>\r\n        <img src='./imgs/profile.jpg' alt=\"Author of this site\" />\r\n      </div>\r\n      <div className=\"desc-container\">\r\n        <h1 className='greeting'>Hi!</h1>\r\n        <p>\r\n          My name is Noé Landaverde and I am a Mexican Geoinformatics Engineer.\r\n          Although my profession is heavily oriented towards Geographic Information\r\n          Systems and Cartography, my job experience and postgraduate education were\r\n          focused more on the technological/visual aspect of its core: analysing & processing\r\n          geographic information and developing web applications for visualization and\r\n          cartographic purposes.\r\n        </p>\r\n        <p>\r\n          I consider myself open-minded, versatile and very adaptable, as well\r\n          as always looking forward to learning more and improving in all aspects possible.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n","import React from 'react';\r\nimport './SocialMedia.css';\r\n\r\nexport default (props) => {\r\n  return(\r\n    <div className='sc-icons'>\r\n      {props.children}\r\n      <div className='sc-icons-container'>\r\n        {(props.links || []).map(link =>\r\n          <a target='_blank' href={link.url} key={link.name} rel='noopener noreferrer'>\r\n            <img\r\n              className='icon' \r\n              src={`./icons/${link.name.toLowerCase()}.svg`} alt={`Link to my ${link.name} page`} />\r\n          </a>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Curriculul\r\n * <div>Icons made by \r\n *  <a href=\"https://www.flaticon.com/authors/vectors-market\" title=\"Vectors Market\">\r\n *    Vectors Market\r\n *  </a> from \r\n *  <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a>\r\n * </div>\r\n * \r\n * LinkedIn\r\n * <div>Icons made by \r\n *  <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</a> \r\n *  from \r\n *  <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</a>\r\n * </div>\r\n */\r\n\r\n","import React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport './FunctionLikeMenu.css';\r\n\r\nconst languages = ['JavaScript','Python'];\r\n\r\nexport default (props) => {\r\n  const [state,setState] = useState({ language: languages[0] });\r\n  const renderChildren = () => {\r\n    return React.Children.map(props.children,child => {\r\n      let { children, to } = child.props;\r\n      if(typeof children == 'string') {\r\n        const props = useLocation().pathname == to ? \r\n          { className: 'selected', children: `'${children}'` } : {children: `/*${children}*/` };\r\n        return React.cloneElement(child,props);\r\n      }\r\n      return child;\r\n    });\r\n  }; \r\n\r\n  switch(state.language) {\r\n    case languages[0]:\r\n      return (\r\n        <div className='function-menu'>\r\n          <h2>\r\n            {/*<span className='var-keyword'>const </span> */}\r\n            <span className='variable'>getMoreInfo</span>({renderChildren()}) \r\n            => {'{'} \r\n          </h2>\r\n        </div>\r\n      );\r\n    case languages[1]:\r\n      return (\r\n        <div>Py</div>\r\n      );\r\n    default:\r\n      return (\r\n        <div></div>\r\n      );\r\n  };\r\n};\r\n\r\n","import React, { useRef, useEffect } from 'react';\r\nimport './InfoContainer.css';\r\n\r\nconst scrollTo = (element) => window.scrollTo({\r\n  top: element.offsetTop,\r\n  left: 0,\r\n  behavior: 'smooth'\r\n});\r\n\r\nexport default ({ children,scrollOnMount }) => {\r\n  const scroll = typeof scrollOnMount == 'boolean' ? scrollOnMount : true;\r\n  try {\r\n    const infoRef = useRef(null);\r\n    useEffect(() => {\r\n      if(!infoRef.current || !scroll) return;\r\n      scrollTo(infoRef.current);\r\n    },[]);\r\n\r\n    return (\r\n      <div ref={infoRef} className='info-container'>\r\n        {children}\r\n      </div>\r\n    )\r\n  } catch(e) {\r\n    return <h1>Could not render this component!</h1>\r\n  }\r\n};\r\n\r\n","import React, { useState } from 'react';\r\nimport './Collapsible.css';\r\n\r\nexport default (props) => {\r\n  let classes = { header: 'header expanded', btn: 'btn btn-expanded', div: 'collapsible expanded' };\r\n  let headerText = props.headerText || ['See more','See less'];\r\n  let text = headerText[1];\r\n  const [state,setState] = useState({ collapsed: true });\r\n  const collapse = () => {\r\n    const collapsed = !state.collapsed;\r\n    setState({ ...state, collapsed: collapsed });\r\n    if(props.onCollapsedSet) props.onCollapsedSet(!collapsed);\r\n  };\r\n\r\n  if(state.collapsed) {\r\n    text = headerText[0];\r\n    classes.header = 'header';\r\n    classes.btn = 'btn btn-collapsed';\r\n    classes.div = 'collapsible collapsed';\r\n  }\r\n\r\n  return (\r\n    <div className='collapsible-parent' onClick={collapse}>\r\n      <div className={classes.header}>\r\n        <h4 className='title'>{text}</h4>\r\n        <div className='btn-container'>\r\n          <button className={classes.btn}></button>\r\n        </div>\r\n      </div>\r\n      <div className={classes.div}>\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n    \r\n  )\r\n}\r\n\r\n","import React, { useState } from 'react';\r\nimport Collapsible from '../Collapsible/Collapsible';\r\nimport './InfoElement.css';\r\n\r\nconst includeThesisTopic = (thesisTopic) => {\r\n  return thesisTopic ? <h4><span className='highlight'>Thesis topic:</span> \"{thesisTopic}\"</h4> : null;\r\n};\r\n\r\nconst renderJobDetails = (description,details,onCollapsedSet) => {\r\n  return description && details ? \r\n    (\r\n      <React.Fragment>\r\n        <h4 className='description'>{description}</h4>\r\n        {\r\n          details && details.length > 0 ? \r\n            <Collapsible \r\n              onCollapsedSet={onCollapsedSet} \r\n              headerText={['See more details', 'See less']}\r\n            >\r\n              <ol className='details-list'>\r\n                {details.map((d,i) => <li key={''+i + d[i]} className='small'>{d}</li>)}\r\n              </ol>\r\n            </Collapsible> : null\r\n        }\r\n        \r\n      </React.Fragment>\r\n    ) : null;\r\n};\r\n\r\n\r\nexport default (props) => {\r\n  const { title, programme, term, thesisTopic, \r\n    companyName, institutionName, city, description, details } = props;\r\n  const [state,setState] = useState({ selected: false });\r\n  const onCollapsedSet = (bool) => {\r\n    setState({ ...state, selected: bool });\r\n  };\r\n  \r\n  return (\r\n    <div className={'info-element' + (state.selected ? ' selected' : '')}>\r\n      <div className='icon-container'>\r\n        <div className='icon'>\r\n          <img src={`./icons/${props.icon}.png`}\r\n            alt={`Icon of the insitution or company named ${companyName || institutionName}`}></img>\r\n        </div>\r\n      </div>\r\n      <div className='info-container'>\r\n        <h4>\r\n          <span className='wrap highlight'>{title || programme}</span>\r\n          <span className='wrap small'>{`(${term[0]} to ${term[1]})`}</span>\r\n        </h4>\r\n        {includeThesisTopic(thesisTopic)}\r\n        <h4>\r\n          <span className='wrap highlight'>{companyName || institutionName}</span>\r\n          <span className='wrap small'>({city})</span>\r\n        </h4>\r\n        {renderJobDetails(description,details,onCollapsedSet)}\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\n","import React from 'react';\r\nimport './SkInfo.css';\r\n\r\nconst renderGraph = (level,color) => {\r\n  if(!level) return;\r\n  const domain = ['Aware','Novice','General Application','Intermediate','Proficient','Advanced','Expert'];\r\n  return (\r\n    <div className='s-list'>\r\n      {domain.map((d,i) => {\r\n        let isAtLevel = i <= (level - 1);\r\n        return (\r\n          <div key={`${d}_${i}`}\r\n            title={d}\r\n            className={'graph-element' +  (isAtLevel ? ' filled' : '')} \r\n            style={{ backgroundColor: isAtLevel ? color : '' }}>\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n};\r\n\r\nconst renderSublist = (sublist) => {\r\n  if(!sublist || sublist.length === 0) return;\r\n  const text = sublist.join(', ');\r\n  return (<p className='s-row-list'>{text}</p>)\r\n}\r\n\r\nexport default ({ title, data }) => {\r\n  return (\r\n    <div className={'info-element non-reverse'}>\r\n      <div className='title-container'>\r\n        <h2 className=\"list-title\">{title}</h2>\r\n      </div>\r\n      <div className='info-container padding-left'>\r\n        {data.map(d => (\r\n          <div key={d.name} className='flex-container'>\r\n            <h3 className='s-name code' style={{ color: d.color }}>{d.name}</h3>\r\n            {renderGraph(d.level,d.color)}\r\n            {renderSublist(d.sublist)}\r\n          </div>\r\n          \r\n          )\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\n","import React from 'react';\r\nimport './SquaredButton.css';\r\nimport { validateFn } from '../../scripts/utils';\r\n\r\nexport default (props) => {\r\n  return (\r\n    <div className='squared-btn' onClick={validateFn(props.onClick)}>\r\n      {props.text}\r\n    </div>\r\n  )\r\n}\r\n\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport * as classMap from '../../classes/ClassMap';\r\nimport { fetchData } from '../../scripts/utils';\r\nimport './GraphicsContainer.css';\r\n\r\nconst Spinner = () => {\r\n  return <div className='spinner' ></div>\r\n};\r\n\r\nexport default (props) => {\r\n  const containerRef = useRef();\r\n  const menuRef = useRef();\r\n  const { settings, additionalData, url, rowConversion, class: className } = props;\r\n  const [descProps,setDescProps] = useState(null);\r\n  const [state,setState] = useState({ \r\n    isLoading: true, \r\n    failedToLoad: false,\r\n    data: null,\r\n    graphic: null \r\n  });\r\n\r\n  const renderDescription = (Description) => {\r\n    return Description && !state.isLoading && !state.failedToLoad ? (\r\n      <div className='graphics-desc'>\r\n        <Description descProps={descProps}/>\r\n      </div>\r\n    ) : null;\r\n  };\r\n\r\n  useEffect(() => { // data fetching\r\n    const abortController = new AbortController();\r\n    const { signal } = abortController;\r\n    const onGraphicsMount = async function() {\r\n      const data = await fetchData(url,{ signal },rowConversion);\r\n      if(data instanceof Error) {\r\n        if(!signal.aborted) {\r\n          console.error(data);\r\n          setState({ isLoading: false, failedToLoad: true });\r\n        }\r\n        return;\r\n      }\r\n      setState(s => ({ ...s, isLoading: false, data }));\r\n    };\r\n    onGraphicsMount();\r\n    return () => {\r\n      abortController.abort();\r\n    };\r\n  },[]);\r\n\r\n  useEffect(() => { // resizing based on media queries\r\n    if(props.settings.resizeBy === 'method') {\r\n      const mqls = [600,900,1200].map(width => window.matchMedia(`(max-width:${width}px)`));\r\n      const resize = () => state.graphic.resize();\r\n      mqls.forEach(m => m.addListener(resize));\r\n      return () => {\r\n        mqls.forEach(m => m.removeListener(resize));\r\n      };\r\n    }\r\n  },[state.graphic]);\r\n\r\n  useEffect(() => { // render graphic\r\n    if(!state.data) return;\r\n    const containers = { menu: menuRef.current, main: containerRef.current };\r\n    const params = [containers,state.data,settings,additionalData,setDescProps];\r\n    const graphic = new classMap[className](...params);\r\n    graphic.draw();\r\n    setState(s => ({ ...s, graphic }));\r\n  },[state.data]);\r\n\r\n  /* Rendering */\r\n  if(state.isLoading) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  if(state.failedToLoad) {\r\n    return <h1 className='empty-list'>Failed to load.</h1>\r\n  }\r\n  \r\n  switch(props.class) {\r\n    case 'OpeningHoursMap':\r\n      return (\r\n        <div className={'graphics-element' /* + (name === 'Maps' ? ' graphic-element-map' : '')*/}>\r\n          <div className='graphics-container flex'>\r\n            <div ref={menuRef} className='graphics-menu'></div>\r\n            <div ref={containerRef} className='graphics-area ocean'></div>\r\n          </div>\r\n          {renderDescription(props.description)}\r\n        </div>\r\n        \r\n      )\r\n    default:\r\n      return (\r\n        <div className='graphic-element'>\r\n          <div ref={containerRef} className='graphics-container'></div>\r\n          {renderDescription(props.description)}\r\n        </div>\r\n      )\r\n  }\r\n  \r\n};\r\n","import React from 'react';\r\nimport '../GraphicsContainer/GraphicsContainer.css';\r\n\r\nexport default (props) => {\r\n  const renderDescription = (Description) => {\r\n    return Description ? (\r\n      <div className='graphics-desc'>\r\n        <Description/>\r\n      </div>\r\n    ) : null;\r\n  };\r\n  \r\n  return (\r\n    <div className='graphic-element'>\r\n      <div className='graphics-container height-auto'>\r\n        {props.content()}\r\n      </div>\r\n      {renderDescription(props.description)}\r\n    </div>\r\n  )\r\n\r\n  \r\n};\r\n","import React, { useState } from 'react';\r\nimport { Route, Link, Switch } from 'react-router-dom';\r\nimport GraphicsContainer from '../GraphicsContainer/GraphicsContainer';\r\nimport FixedContent from '../FixedGraphicsContent/FixedGraphicsContent';\r\nimport { portfolioData } from '../../data/data';\r\nimport './Portfolio.css';\r\n\r\n\r\nexport default (props) => {\r\n  let { path, url } = props.match;\r\n  const pathArray = props.history.location.pathname.split('/');\r\n  const current = pathArray[pathArray.length - 1];\r\n  url = url.slice(-1) === '/' ? url.slice(0,-1) : url;\r\n  path = path.slice(-1) === '/' ? path.slice(0,-1) : path;\r\n\r\n  const renderListElement = ({ type, ...rest }) => {\r\n    switch(type) {\r\n      case 'graphics':\r\n        return <GraphicsContainer {...rest}/>;\r\n      case 'fixed':\r\n        return <FixedContent {...rest} />\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const renderListElements = ({ list,name }) => {\r\n    if(list.length == 0) {\r\n      return <h1 className='empty-list'>Nothing to see here... yet.</h1> \r\n    }\r\n    return list.map(e => {\r\n      return (\r\n        <div key={e.name} className='portfolio-element'>\r\n          <h1 className='portfolio-element-title'>{e.name}</h1>\r\n          {renderListElement(e)}\r\n        </div>\r\n      )\r\n    })\r\n  };\r\n\r\n  return (\r\n    <div className='portfolio-main'>\r\n      <nav className=\"portfolio-nav\">\r\n        {portfolioData.map(d => \r\n          <Link key={d.name} className={current === d.path ? 'current-page' : ''} to={`${url}/${d.path}`}>\r\n            {d.name}\r\n          </Link>\r\n        )}\r\n      </nav>\r\n      <div className='portfolio-content'>\r\n        <Switch>\r\n          {portfolioData.map(d => \r\n            <Route key={d.name} path={`${path}/${d.path}`}>\r\n              {renderListElements(d)}\r\n            </Route>\r\n          )}\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n    \r\n  )\r\n  \r\n};\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from 'react-router-dom';\r\nimport { urls, educationData, experienceData, skillsLangData } from './data/data';\r\n\r\nimport CoverLetter from './components/CoverLetter/CoverLetter';\r\nimport SocialMedia from './components/SocialMedia/SocialMedia';\r\nimport FunctionLikeMenu from './components/FunctionLikeMenu/FunctionLikeMenu';\r\nimport InfoContainer from './components/InfoContainer/InfoContainer';\r\nimport InfoElement from './components/InfoElement/InfoElement';\r\nimport SkInfo from './components/SkInfo/SkInfo';\r\nimport SquaredButton from './components/SquaredButton/SquaredButton';\r\n//import CardList from './components/CardList/CardList';\r\nimport Portfolio from './components/Portfolio/Portfolio';\r\n\r\nimport './App.css';\r\nimport './components/FunctionLikeMenu/FunctionLikeMenu.css';\r\n\r\nconst getInfoElements = (data,keyProp) => {\r\n  return data.map(d => <InfoElement key={d[keyProp]} {...d}/>)\r\n};\r\n\r\nfunction App(props) {\r\n  return (\r\n    <Router basename={process.env.PUBLIC_URL}>\r\n      <Switch>\r\n        \r\n        <Route path={'/portfolio'} component={Portfolio}/>\r\n        <Route path={'/'} component={AboutMe}/>\r\n        <Redirect exact from='/' to='/skills-and-languages' />\r\n        {/*<Route render={(props) => <SquaredButton/>}/> No match component? */} \r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nconst AboutMe = props => {\r\n  let { url, path } = props.match;\r\n  url = url.slice(-1) === '/' ? url.slice(0,-1) : url;\r\n  path = path.slice(-1) === '/' ? path.slice(0,-1) : path;\r\n  return (\r\n    <div className=\"main\">\r\n      <CoverLetter />\r\n      <SocialMedia links={urls}>\r\n        <SquaredButton text=\"See portfolio\" onClick={() => props.history.push(`${url}/portfolio`) } />\r\n      </SocialMedia>\r\n      <hr></hr>\r\n      <FunctionLikeMenu>\r\n        <Link to={`${url}/skills-and-languages`}>Skills & Languages</Link>\r\n        <Link to={`${url}/experience`}>Experience</Link>\r\n        <Link to={`${url}/education`}>Education</Link>\r\n      </FunctionLikeMenu>\r\n      <Switch>\r\n        <Route exact path={`${path}/`}>\r\n          <p className='comment'>// Select a parameter value</p>\r\n        </Route>\r\n        <Route exact path={`${path}/education`}>\r\n          <InfoContainer>\r\n            {getInfoElements(educationData,'institutionName')}\r\n          </InfoContainer>\r\n        </Route>\r\n        <Route exact path={`${path}/experience`}>\r\n          <InfoContainer>\r\n            {getInfoElements(experienceData,'companyName')}\r\n          </InfoContainer>\r\n        </Route>\r\n        <Route exact path={`${path}/skills-and-languages`}>\r\n          <InfoContainer scrollOnMount={false}>\r\n            {Object.entries(skillsLangData).map(([key,value]) => \r\n              <SkInfo key={key} title={key[0].toUpperCase() + key.slice(1)} data={value} />\r\n            )}\r\n          </InfoContainer>\r\n        </Route>\r\n      </Switch>\r\n      <div className='function-menu'>\r\n        <h2 style={{textAlign:'left'}}>{'};'}</h2>\r\n      </div>\r\n    </div>\r\n  )\r\n} \r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}